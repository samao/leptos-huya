(this.webpackJsonp_name_=this.webpackJsonp_name_||[]).push([[6],{231:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){"use strict";var r,o="object"==typeof Reflect?Reflect:null,i=o&&"function"==typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function u(){u.init.call(this)}e.exports=u,e.exports.once=function(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}m(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&m(e,"error",t,{once:!0})}(e,o)}))},u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var c=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?u.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var o,i,a,u;if(s(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),a=i[t]),void 0===a)a=i[t]=n,++e._eventsCount;else if("function"==typeof a?a=i[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(o=l(e))>0&&a.length>o&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,u=c,console&&console.warn&&console.warn(u)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=d.bind(r);return o.listener=n,r.wrapFn=o,o}function p(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):v(o,o.length)}function y(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){r.once&&e.removeEventListener(t,o),n(i)}))}}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),u.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},u.prototype.getMaxListeners=function(){return l(this)},u.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var u=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw u.context=a,u}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var s=c.length,l=v(c,s);for(n=0;n<s;++n)i(l[n],this,t)}return!0},u.prototype.addListener=function(e,t){return f(this,e,t,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(e,t){return f(this,e,t,!0)},u.prototype.once=function(e,t){return s(t),this.on(e,h(this,e,t)),this},u.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,h(this,e,t)),this},u.prototype.removeListener=function(e,t){var n,r,o,i,a;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},u.prototype.listeners=function(e){return p(this,e,!0)},u.prototype.rawListeners=function(e){return p(this,e,!1)},u.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):y.call(e,t)},u.prototype.listenerCount=y,u.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r,o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},u=("undefined"==typeof window?{}:window).log,c=void 0===u?{getLoggers:function(){return{}}}:u;!function(e){e[e.TRACE=0]="TRACE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR"}(r||(r={}));var s=c.getLoggers(),l=function(e){var t=i(e),n=t[0],r=t[1],o=t.slice(2),a=(new Date).toLocaleTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1");return"[".concat(a,"] ").concat(n," ").concat(r,": ").concat(o.join())},f=function(e){void 0===e&&(e="root");var t=this;this.name=e,this.levels=r,this.level=0,this.enabled=!0,this.trace=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.enabled&&t.level<=r.TRACE&&console.trace(l(a(["[TRACE]",t.name],i(e),!1)))},this.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.enabled&&t.level<=r.DEBUG&&console.log(l(a(["[DEBUG]",t.name],i(e),!1)))},this.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.enabled&&t.level<=r.INFO&&console.log(l(a(["[INFO]",t.name],i(e),!1)))},this.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.enabled&&t.level<=r.WARN&&console.warn(l(a(["[WARN]",t.name],i(e),!1)))},this.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.enabled&&t.level<=r.ERROR&&console.error(l(a(["[ERROR]",t.name],i(e),!1)))},this.setLevel=function(e){t.level=Math.max(Math.min(e,r.ERROR),r.TRACE)},this.getLevel=function(){return t.level},this.getLevelTag=function(){return t.levels[t.level]},this.enabledAll=function(e){void 0===e&&(e=!0),t.enabled=e},this.disableAll=function(e){void 0===e&&(e=!1),t.enabled=e}};t.default=o(o({},new f),{getLogger:function(e){return void 0===s[e]&&(s[e]=new f(e)),s[e]},getLoggers:function(){return s}})}]).default},function(e,t,n){"use strict";t.__esModule=!0,t.cx=t.css=void 0;var r=i(n(3));t.css=r.default;var o=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}t.cx=o.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,...t){throw new Error('Using the "css" tag in runtime is not supported. Make sure you have set up the Babel plugin correctly.')}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(...e){return e.filter(Boolean).join(" ")}},function(e,t,n){var r=n(6);"string"==typeof r&&(r=[[e.i,r,""]]),n(8)(r,{hmr:!0,transform:void 0,insertInto:void 0}),r.locals&&(e.exports=r.locals)},function(e,t,n){(t=n(7)(!1)).push([e.i,".b13la550{width:23px;height:44px;background-size:100% 100%;vertical-align:middle;display:inline-block;}\n.b12t5uoo{background-size:100% 100%;line-height:44px;vertical-align:middle;display:inline-block;font-style:normal;-webkit-flex:auto;-ms-flex:auto;flex:auto;}\n.bvyzygh{background-size:100% 100%;width:53px;height:44px;vertical-align:middle;display:inline-block;}\n.b1482y8w{margin-top:0;}\n.c1hkwb6p{width:100px;height:36px;background-size:100% 100%;vertical-align:middle;display:inline-block;}\n.cdz9rme{position:absolute;top:50%;padding:0 30px;color:#fff;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);}\n.c80gt5q{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}\n.c1quo010{background-size:100% 100%;line-height:36px;vertical-align:middle;display:inline-block;font-style:normal;-webkit-flex:auto;-ms-flex:auto;flex:auto;}\n.c1tddzzr{background-size:100% 100%;width:84px;height:36px;vertical-align:middle;display:inline-block;}\n.cbsfnwn{margin-top:4px;}\n.c1ki4615{width:100%;height:100%;overflow:hidden !important;}\n.f1kl3pta{-webkit-filter:drop-shadow(1px 1px #000);filter:drop-shadow(1px 1px #000);}\n.l1hd3vq3{line-height:40px;}\n.iwpqo3m{will-change:transform;visibility:unset !important;}\n.axi2s0i{position:absolute;}\n.t1qj0kdv{-webkit-filter:drop-shadow(1px 1px #fff9);filter:drop-shadow(1px 1px #fff9);}\n.d1uhb2uw{display:inline;position:absolute;box-sizing:border-box;text-align:start;white-space:nowrap;-moz-user-select:none;-o-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-perspective:500px;-moz-perspective:500px;-ms-perspective:500px;perspective:500px;padding:1px 0;font-family:-apple-system,Microsoft Yahei,SimHei,Helvetica Neue,Helvetica,Arial,Hiragino Sans GB,Heiti SC,WenQuanYi Micro Hei,sans-serif;pointer-events:none;visibility:hidden;}\n.dtvjw05{border:2px solid white;}\n",""]),t.locals={b13la550:"b13la550",b12t5uoo:"b12t5uoo",bvyzygh:"bvyzygh",b1482y8w:"b1482y8w",c1hkwb6p:"c1hkwb6p",cdz9rme:"cdz9rme",c80gt5q:"c80gt5q",c1quo010:"c1quo010",c1tddzzr:"c1tddzzr",cbsfnwn:"cbsfnwn",c1ki4615:"c1ki4615",f1kl3pta:"f1kl3pta",l1hd3vq3:"l1hd3vq3",iwpqo3m:"iwpqo3m",axi2s0i:"axi2s0i",t1qj0kdv:"t1qj0kdv",d1uhb2uw:"d1uhb2uw",dtvjw05:"dtvjw05"},e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r,o,i=e[1]||"",a=e[3];if(!a)return i;if(t&&"function"==typeof btoa){var u=(n=a,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(o," */")),c=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[i].concat(c).concat([u]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var u=0;u<e.length;u++){var c=[].concat(e[u]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},function(e,t,n){var r,o,i={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),u=function(e,t){return t?t.querySelector(e):document.querySelector(e)},c=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=u.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),s=null,l=0,f=[],d=n(9);function h(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=i[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(g(r.parts[a],t))}else{var u=[];for(a=0;a<r.parts.length;a++)u.push(g(r.parts[a],t));i[r.id]={id:r.id,refs:1,parts:u}}}}function p(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],u={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(u):n.push(r[a]={id:a,parts:[u]})}return n}function y(e,t){var n=c(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=f[f.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),f.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=c(e.insertAt.before,n);n.insertBefore(t,o)}}function v(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=f.indexOf(e);t>=0&&f.splice(t,1)}function m(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=n.nc;r&&(e.attrs.nonce=r)}return b(t,e.attrs),y(e,t),t}function b(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function g(e,t){var n,r,o,i;if(t.transform&&e.css){if(!(i="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=i}if(t.singleton){var a=l++;n=s||(s=m(t)),r=O.bind(null,n,a,!1),o=O.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",b(t,e.attrs),y(e,t),t}(t),r=E.bind(null,n,t),o=function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(t),r=j.bind(null,n),o=function(){v(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=p(e,t);return h(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var a=n[o];(u=i[a.id]).refs--,r.push(u)}for(e&&h(p(e,t),t),o=0;o<r.length;o++){var u;if(0===(u=r[o]).refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete i[u.id]}}}};var w,_=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function O(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=_(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function j(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function E(e,t,n){var r=n.css,o=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||i)&&(r=d(r)),o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),u=e.href;e.href=URL.createObjectURL(a),u&&URL.revokeObjectURL(u)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},function(e,t){self.fetch||(self.fetch=function(e,t){return t=t||{},new Promise((function(n,r){var o=new XMLHttpRequest,i=[],a=[],u={},c=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:c,headers:{keys:function(){return i},entries:function(){return a},get:function(e){return u[e.toLowerCase()]},has:function(e){return e.toLowerCase()in u}}}};for(var s in o.open(t.method||"get",e,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,n){i.push(t=t.toLowerCase()),a.push([t,n]),u[t]=u[t]?u[t]+","+n:n})),n(c())},o.onerror=r,o.withCredentials="include"==t.credentials,t.headers)o.setRequestHeader(s,t.headers[s]);o.send(t.body||null)}))})},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ft}));var r=n(0);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==o(t)?t:t+""}var f=function(){return e=function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];c(this,e),this.islive=t,this.danmuMap=[],this.renderMap=new Map,this.danmuSet=new Set,this.IGNORE_SEEK_SECONDS=2,this.lastTime=-1,this._locked=!1,this._blockedConfig={top:!1,bottom:!1,move:!1,color:!1}},(t=[{key:"updateTime",value:function(e){var t=this;if(this.islive)return this.danmuMap.forEach((function(e){t.renderFilter(e)})),void(this.danmuMap.length=0);var n=e-this.lastTime;this.lastTime=e,n<=0||n>this.IGNORE_SEEK_SECONDS||this.danmuMap.forEach((function(r){var o=e-r.time;t.renderFilter(r,(function(){return o>=0&&o<=n&&!r.blocked}))}))}},{key:"blockedType",set:function(e){var t=this;this._blockedConfig=a(a({},this._blockedConfig),"boolean"==typeof e?{top:e,move:e,bottom:e}:e),this.danmuMap.forEach((function(e){e.blocked=t._blockedConfig[e.mode]}))}},{key:"locked",set:function(e){this._locked=e}},{key:"current",get:function(){return this.renderMap}},{key:"add",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._locked||!this.islive){var r=Array.isArray(e)?e:[e];r.forEach((function(e){t.danmuSet.has(e.id)||(t.danmuSet.add(e.id),t.danmuMap.push(e),n&&t.renderFilter(e))}))}}},{key:"removeFromRendered",value:function(e){var t=this;e.forEach((function(e){t.renderMap.has(e.id)&&t.renderMap.delete(e.id)}))}},{key:"removeAllRendered",value:function(){this.renderMap.clear(),this.islive&&(this.danmuMap.length=0)}},{key:"clear",value:function(){this.danmuMap.length=0,this.renderMap.clear()}},{key:"renderFilter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};this.renderVaild(e)&&t()&&(e.renderInit=Date.now(),this.renderMap.set(e.id,e))}},{key:"renderVaild",value:function(e){return!e.blocked&&!this._blockedConfig[e.mode]&&!this.renderMap.has(e.id)}}])&&s(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t,n){return t=y(t),function(e,t){if(t&&("object"==d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return!!e}()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function t(){var e;return h(this,t),(e=p(this,t,arguments))._playing=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(r.EventEmitter);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}function _(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==b(t)?t:t+""}function O(e,t,n){return t=j(t),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return!!e}()?Reflect.construct(t,n||[],j(e).constructor):t.apply(e,n))}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var S=function(e){function t(){var e;return g(this,t),(e=O(this,t,arguments)).destroy=function(){e.detach()},e.pause=function(){e._playing=!1},e.resume=function(){e._playing=!0},e.timeupdate=function(){e._playing&&e.emit("timeUpdate",e._media.currentTime)},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),n=t,(r=[{key:"attach",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._media=e,this.addMediaListeners(),this._playing=t}},{key:"detach",value:function(){this.removeMediaListeners(),this._media=null}},{key:"addMediaListeners",value:function(){this._media.addEventListener("timeupdate",this.timeupdate)}},{key:"removeMediaListeners",value:function(){this._media.removeEventListener("timeupdate",this.timeupdate)}}])&&w(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(m);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x(r.key),r)}}function x(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==k(t)?t:t+""}function A(e,t,n){return t=R(t),function(e,t){if(t&&("object"==k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return!!e}()?Reflect.construct(t,n||[],R(e).constructor):t.apply(e,n))}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var I,M=function(e){function t(){var e;return P(this,t),(e=A(this,t,arguments)).INTERVAL=300,e._attachTime=0,e.destroy=function(){e.detach()},e.pause=function(){e._playing=!1},e.resume=function(){e._playing=!0},e.timeupdate=function(){e._playing&&e.emit("timeUpdate",(Date.now()-e._attachTime)/1e3)},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(t,e),n=t,(r=[{key:"attach",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._playing=t,this._attachTime=Date.now(),this._timerTask=setInterval(this.timeupdate,this.INTERVAL)}},{key:"detach",value:function(){clearInterval(this._timerTask),this._timerTask=null}}])&&T(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(m);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,z(r.key),r)}}function z(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==C(t)?t:t+""}!function(e){e.ATTACH="attach",e.DETACH="detach",e.PAUSE="pause",e.RESUME="resume",e.DESTROY="destroy",e.TIME_UPDATE="timeUpdate"}(I||(I={}));var N=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"live";D(this,e),this.type=t,this._playing=!1,this._destroyed=!1,this.createTypedRunner(),this.fire=this._runner.emit.bind(this),this.on=this._runner.on.bind(this),this.once=this._runner.once.bind(this),this.off=this._runner.off.bind(this)},(t=[{key:"attach",value:function(e){this._runner.attach(e),this._playing=!0,this.fire(I.ATTACH,e)}},{key:"detach",value:function(){this._runner.detach(),this.fire(I.DETACH)}},{key:"pause",value:function(){!this._destroyed&&this._playing&&(this._runner.pause(),this._playing=!1,this.fire(I.PAUSE,this._playing))}},{key:"resume",value:function(){this._destroyed||this._playing||(this._runner.resume(),this._playing=!0,this.fire(I.RESUME,this._playing))}},{key:"toggle",value:function(){this._destroyed||(this._playing?(this._runner.pause(),this.fire(I.PAUSE,!1)):(this._runner.resume(),this.fire(I.RESUME,!0)),this._playing=!this._playing)}},{key:"destroy",value:function(){this._runner.removeAllListeners(),this._runner.destroy(),this._playing=!1,this._destroyed=!0,this.fire(I.DESTROY)}},{key:"playing",get:function(){return this._playing}},{key:"createTypedRunner",value:function(){var e=this;"vod"===this.type?this._runner=new S:this._runner=new M,this._runner.on("timeUpdate",(function(t){e.fire(I.TIME_UPDATE,t)}))}}])&&H(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,q(r.key),r)}}function q(e){var t=function(e,t){if("object"!=U(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==U(t)?t:t+""}function G(e,t,n){return t=V(t),function(e,t){if(t&&("object"==U(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return!!e}()?Reflect.construct(t,n||[],V(e).constructor):t.apply(e,n))}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var $=function(e){function t(){return B(this,t),G(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(t,e),n=t,(r=[{key:"destroy",value:function(){this._container.innerHTML=""}}])&&F(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(r.EventEmitter),W={random:function(){return Number(crypto.getRandomValues(new Uint8Array(1)))/254},randomInt:function(e){return this.floor(this.random()*e)},ceil:function(e){return Math.ceil(e)},floor:function(e){return Math.floor(e)}},J=(n(2),"f1kl3pta"),K="-apple-system, Microsoft Yahei, SimHei, Helvetica Neue, Helvetica, Arial, \nHiragino Sans GB, Heiti SC, WenQuanYi Micro Hei,sans-serif";function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ee(r.key),r)}}function ee(e){var t=function(e,t){if("object"!=X(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==X(t)?t:t+""}function te(e,t,n){return t=ne(t),function(e,t){if(t&&("object"==X(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return!!e}()?Reflect.construct(t,n||[],ne(e).constructor):t.apply(e,n))}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n(5);var oe=function(e){function t(){return Q(this,t),te(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&re(e,t)}(t,e),n=t,(r=[{key:"attach",value:function(e){this._container=e,e.classList.remove(J),this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.classList.add("axi2s0i"),this._ctx=this._canvas.getContext("2d")),this._container.append(this._canvas),this.alignCanvas()}},{key:"detach",value:function(){this._canvas&&this._canvas.remove()}},{key:"drawDanmus",value:function(e){var t=this;e.forEach((function(e,n){t.renderAt(n,e)}))}},{key:"reset",value:function(){!this.alignCanvas()&&this._ctx&&(/Firefox/gi.test(navigator.userAgent)?this._canvas.width=this._canvas.width:this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height))}},{key:"clearRendered",value:function(){this._ctx&&this._canvas&&this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height)}},{key:"renderAt",value:function(e,t){this._ctx&&e.render&&this._ctx.drawImage(e.render,t.point.x,t.point.y)}},{key:"alignCanvas",value:function(){if(this._container){var e=W.floor(this._container.clientWidth),t=W.floor(this._container.clientHeight);if(this._canvas.width!==e||this._canvas.height!==t)return this._canvas.width=e,this._canvas.height=t,!0}return!1}}])&&Z(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}($),ie=new Map,ae=new Set;function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,le(r.key),r)}}function le(e){var t=function(e,t){if("object"!=ue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==ue(t)?t:t+""}function fe(e){return[14,20,26].reduce((function(t,n){var r=e-n;return r>0&&r<t.distance?{distance:Math.abs(n-e),size:n}:t}),{distance:Number.MAX_VALUE,size:e}).size}var de=function(e){return e.message.length>35?e.message.substr(0,35)+"...":e.message},he=new Map,pe={};function ye(e,t,n){return new Promise((function(r,o){!function(e){return!0===pe[e]}(t)?(e.onload=function(){r(),e.onload=null,he.has(n)||he.set(n,{src:t,img:e})},e.onerror=function(){!function(e){pe[e]=!0;var t=setTimeout((function(){pe[e]=void 0,clearTimeout(t)}),1e4)}(t),o()},e.src=t):o()}))}var ve=function(e){return e.toString(16).padStart(6,"000000")},me=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._canvasPool=[]},(t=[{key:"create",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._htmlLine||this.createMeasureSpan();var r=(t=this._canvasPool.length>0?this._canvasPool.shift():document.createElement("canvas")).getContext("2d");if(r){var o,i=de(e),a=this.calc((e.background?"".concat(null===(o=e.from)||void 0===o?void 0:o.n,":"):"")+i,void 0!==e.background,{ctx:r,fontSize:"".concat(fe(e.size),"px"),textBaseline:"middle",textAlign:"start",border:n},e.danmuStyle);this.drawDanmu(i,n,{canvas:t,ctx:r,bounds:a,danmu:e}),e.render=t}}},{key:"draw",value:function(e,t,n,r){var o=n.canvas,i=n.ctx,a=n.danmu,u=n.bounds;if(r)if(1===a.danmuStyle){var c=u.width+23+53>76;o.height=44,i.clearRect(0,0,o.width,o.height),i.drawImage(r.head,0,0,23,44),c&&i.drawImage(r.body,0,0,r.body.width,r.body.height,23,0,u.width,44),i.clearRect(u.width-53,0,53,44),i.drawImage(r.tail,0,0,r.tail.width,r.tail.height,u.width-53,0,53,44)}else{var s=u.width+30+30>r.head.width+r.tail.width;o.height=36,i.clearRect(0,0,o.width,o.height),i.drawImage(r.head,0,0),s&&i.drawImage(r.body,0,0,r.body.width,r.body.height,r.head.width,0,u.width,36),i.clearRect(u.width-30,0,30,36),i.drawImage(r.tail,0,0,r.tail.width,r.tail.height,u.width-30,0,30,36)}else o.width=u.width,o.height=u.height,i.clearRect(0,0,o.width,o.height);i.font="".concat(fe(a.size),"px ").concat(K),i.fillStyle="#".concat(a.background?"FFFFFF":ve(a.color));var l,f,d=0===a.color?"#fff9":"#000";/Safari/gi.test(navigator.userAgent)?(i.shadowColor=d,i.shadowBlur=0,i.shadowOffsetX=i.shadowOffsetY=1):i.filter="drop-shadow(1px 1px ".concat(d,")"),i.textBaseline="middle",i.textAlign="start",r?i.fillText("".concat(null!==(l=null==a||null===(f=a.from)||void 0===f?void 0:f.n)&&void 0!==l?l:"",": ").concat(e),1===a.danmuStyle?23:30,W.floor(.56*o.height)):(i.fillText(e,t?1:0,W.floor(.56*u.height)+(t?1:0)),t&&(i.strokeStyle="white",i.lineWidth=2,i.strokeRect(1,1,u.width-2,u.height-2)))}},{key:"drawDanmu",value:function(e,t,n){var r,o=this,i=n.canvas,a=n.ctx,u=n.bounds,c=n.danmu;if(c.background){var s=c.background,l=s.headImg,f=s.bodyImg,d=s.tailImg;if(i.width=u.width,i.height=1===c.danmuStyle?44:36,function(e){var t=e.headImg,n=e.bodyImg,r=e.tailImg;return he.has(t)&&he.has(n)&&he.has(r)}(c.background)){var h=function(e){var t=e.headImg,n=e.bodyImg,r=e.tailImg;return{headInfo:he.get(t),bodyInfo:he.get(n),tailInfo:he.get(r)}}(c.background),p=h.headInfo,y=h.bodyInfo,v=h.tailInfo;return c.background={headImg:p.src,bodyImg:y.src,tailImg:v.src,loaded:!0},void this.draw(e,t,{canvas:i,ctx:a,bounds:u,danmu:c},{head:p.img,body:y.img,tail:v.img})}var m=document.createElement("img"),b=document.createElement("img"),g=document.createElement("img");(r=[l,f,d],Promise.all(r.map((function(e){return function(e){return ie.has(e)?Promise.resolve(ie.get(e)):ae.has(e)?function(e){return new Promise((function(t){var n=setInterval((function(){ie.has(e)&&(clearInterval(n),t(ie.get(e)))}),1e3)}))}(e):(ae.add(e),fetch(e).then((function(e){return e.blob()})).then((function(e){return URL.createObjectURL(e)})).catch((function(){return e})).then((function(t){return ae.delete(e),ie.set(e,t),t})))}(e)})))).then((function(n){var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n,3),s=r[0],h=r[1],p=r[2];c.background={headImg:s,bodyImg:h,tailImg:p,loaded:!0},Promise.all([ye(m,s,l),ye(b,h,f),ye(g,p,d)]).then((function(){o.draw(e,t,{canvas:i,ctx:a,bounds:u,danmu:c},{head:m,body:b,tail:g})})).catch((function(){o.draw(e,t,{canvas:i,ctx:a,bounds:u,danmu:c})}))}))}else this.draw(e,t,{canvas:i,ctx:a,bounds:u,danmu:c})}},{key:"recyle",value:function(e){e.render&&(this._canvasPool.push(e.render),delete e.render)}},{key:"calc",value:function(e,t,n,r){var o=n.ctx,i=n.fontSize,a=n.textBaseline,u=n.textAlign,c=n.border,s=void 0!==c&&c;this._htmlLine.innerText=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),this._htmlLine.style.fontSize=i,s?this._htmlLine.classList.add("dtvjw05"):this._htmlLine.classList.remove("dtvjw05"),document.body.appendChild(this._htmlLine);var l=this._htmlLine.getBoundingClientRect(),f=l.width,d=l.height;this._htmlLine.remove(),o.font="".concat(i," ").concat(K),o.textBaseline=a,o.textAlign=u;var h=o.measureText(e);return{width:Math.max(h.width,f)+(t?1===r?76:60:0),height:Math.min(40,d)}}},{key:"createMeasureSpan",value:function(){this._htmlLine=document.createElement("span"),this._htmlLine.classList.add("d1uhb2uw",J)}}])&&se(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}());function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_e(r.key),r)}}function _e(e){var t=function(e,t){if("object"!=be(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==be(t)?t:t+""}function Oe(e,t,n){return t=je(t),function(e,t){if(t&&("object"==be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return!!e}()?Reflect.construct(t,n||[],je(e).constructor):t.apply(e,n))}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Se,ke=function(e){function t(){var e;return ge(this,t),(e=Oe(this,t,arguments)).normalPool=[],e.colorPool={},e.itemsRender=new Map,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ee(e,t)}(t,e),n=t,(r=[{key:"attach",value:function(e){this._container=e,e.classList.add(J,"l1hd3vq3"),this.fragment=document.createDocumentFragment()}},{key:"detach",value:function(){}},{key:"drawDanmus",value:function(e){var t,n=this;e.forEach((function(e,r){if(t=null,n.itemsRender.has(e)){var o=n.itemsRender.get(e);t=o instanceof HTMLSpanElement?o:o.main}else if(r.background){if(r.background.loaded){var i,a,u=n.getDanmuBgElement(1===r.danmuStyle?r.bubbleNo:r.color,r.danmuStyle),c=u.isCached,s=u.shape;c||(s.head.style.backgroundImage="url(".concat(r.background.headImg,")"),s.body.style.cssText="background-image: url(".concat(r.background.bodyImg,");"),s.tail.style.backgroundImage="url(".concat(r.background.tailImg,")")),s.text.style.cssText="font-size: ".concat(fe(r.size),"px;"),s.text.innerText="".concat(null===(i=r.from)||void 0===i?void 0:i.n,": ").concat(r.message),s.main.style.width="".concat(null===(a=r.render)||void 0===a?void 0:a.width,"px"),t=s.main,n.fragment.appendChild(t),n.itemsRender.set(e,s)}}else(t=n.getNormalElement()).classList.add("iwpqo3m"),t.style.color="#".concat(ve(r.color)),t.style.fontSize="".concat(fe(r.size),"px"),0===r.color&&t.classList.add("t1qj0kdv"),t.innerText=r.message,n.fragment.appendChild(t),n.itemsRender.set(e,t);t&&(t.style.transform="translate3d(".concat(Math.round(e.point.x),"px, ").concat(Math.round(e.point.y),"px, 0px)"))})),this._container.appendChild(this.fragment)}},{key:"clearRendered",value:function(){this._container.innerHTML=""}},{key:"reset",value:function(){var e=this;this.itemsRender.forEach((function(t,n){if(n.needRemove){if(t instanceof HTMLSpanElement)e.normalPool.push(t),t.classList.remove("iwpqo3m","t1qj0kdv");else{var r,o=null!==(r=e.colorPool[n.danmuVo.color])&&void 0!==r?r:[];o.push(t),e.colorPool[n.danmuVo.color]=o}e.itemsRender.delete(n)}}))}},{key:"getNormalElement",value:function(){var e;return 0===this.normalPool.length?(e=document.createElement("span")).classList.add("d1uhb2uw"):e=this.normalPool.shift(),e}},{key:"getDanmuBgElement",value:function(e,t){var n,r=null!==(n=this.colorPool[e])&&void 0!==n?n:[];if(0===r.length){if(1===t){var o=document.createElement("i"),i=document.createElement("i"),a=document.createElement("i");o.classList.add("b13la550"),i.classList.add("b12t5uoo"),a.classList.add("bvyzygh");var u=document.createElement("div");u.classList.add("c80gt5q"),u.append(o,i,a);var c=document.createElement("div");c.classList.add("d1uhb2uw","b1482y8w","iwpqo3m");var s=document.createElement("span");return s.classList.add("cdz9rme"),c.append(u,s),{isCached:!1,shape:{head:o,body:i,tail:a,bg:u,main:c,text:s}}}var l=document.createElement("i"),f=document.createElement("i"),d=document.createElement("i");l.classList.add("c1hkwb6p"),f.classList.add("c1quo010"),d.classList.add("c1tddzzr");var h=document.createElement("div");h.classList.add("c80gt5q"),h.append(l,f,d);var p=document.createElement("div");p.classList.add("d1uhb2uw","cbsfnwn","iwpqo3m");var y=document.createElement("span");return y.classList.add("cdz9rme"),p.append(h,y),{isCached:!1,shape:{head:l,body:f,tail:d,bg:h,main:p,text:y}}}return{isCached:!0,shape:r.shift()}}}])&&we(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}($);function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ae(r.key),r)}}function Ae(e){var t=function(e,t){if("object"!=Pe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Pe(t)?t:t+""}!function(e){e.ATTACH="attach",e.DETACH="detach"}(Se||(Se={}));var Re=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"canvas";Te(this,e),this.type=t,this.createTypedRender(),this.fire=this._render.emit.bind(this),this.on=this._render.on.bind(this),this.once=this._render.once.bind(this),this.off=this._render.off.bind(this)},(t=[{key:"drawDanmus",value:function(e){this._render.drawDanmus(e)}},{key:"reset",value:function(){this._render.reset()}},{key:"attach",value:function(e){this._render.attach(e),e.classList.add("c1ki4615"),this.fire(Se.ATTACH,e)}},{key:"detach",value:function(){this._render.detach(),this.fire(Se.DETACH)}},{key:"destroy",value:function(){this._render.destroy()}},{key:"clearRendered",value:function(){this._render.clearRendered()}},{key:"createTypedRender",value:function(){"css"===this.type?this._render=new ke:this._render=new oe}}])&&xe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||Ce(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ce(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Ce(e,t){if(e){if("string"==typeof e)return De(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?De(e,t):void 0}}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ze(r.key),r)}}function ze(e){var t=function(e,t){if("object"!=Le(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Le(t)?t:t+""}var Ne=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lineMap=new Map,this._maxLineInViewPort=0,this.LINE_HEIGHT=50,this.rendered=new Map,this._size={width:0,height:0},this.prepareInit()},(t=[{key:"findNodeUnderPoint",value:function(e){var t,n=this.getIndexByYpos(e.y),r=Me(Array.from(this.rendered).reverse());try{for(r.s();!(t=r.n()).done;){var o=Ie(t.value,2),i=o[0],a=o[1];if(a.lineIndex===n){var u=e.x-a.point.x;if(u>0&&u<a.size.width)return i}}}catch(e){r.e(e)}finally{r.f()}return null}},{key:"getNode",value:function(e){return this.rendered.get(e)}},{key:"measure",value:function(e){return e.render?{width:e.render.width,height:e.render.height}:{width:0,height:0}}},{key:"remove",value:function(e){if(!this.rendered.has(e))return!1;this.rendered.delete(e);var t,n=Me(this.lineMap);try{for(n.s();!(t=n.n()).done;){var r=Ie(t.value,2),o=r[0],i=r[1];if("EMPTY"!==i&&i.danmuVo===e)return this.lineMap.set(o,"EMPTY"),!0}}catch(e){n.e(e)}finally{n.f()}return!1}},{key:"clear",value:function(){var e=this;this.rendered.clear(),this.lineMap.forEach((function(t,n){return e.lineMap.set(n,"EMPTY")}))}},{key:"size",set:function(e){var t=e.height,n=e.width;this._size.width=n,this._size.height=t,this._maxLineInViewPort=W.floor(t/this.LINE_HEIGHT)}},{key:"width",get:function(){return this._size.width}},{key:"height",get:function(){return this._size.height}},{key:"prepareInit",value:function(){for(var e=0;e<80;++e)this.lineMap.set(e,"EMPTY")}},{key:"getIndexByYpos",value:function(e){return W.floor(e/this.LINE_HEIGHT)}}])&&He(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Fe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ve(r.key),r)}}function Ve(e){var t=function(e,t){if("object"!=Ue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Ue(t)?t:t+""}function Ye(e,t,n){return t=Je(t),function(e,t){if(t&&("object"==Ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return!!e}()?Reflect.construct(t,n||[],Je(e).constructor):t.apply(e,n))}function $e(){return($e="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=We(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}}).apply(null,arguments)}function We(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Je(e)););return e}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ke(e,t){return(Ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Xe=function(e){function t(){var e;return qe(this,t),(e=Ye(this,t,arguments)).duration=4e3,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ke(e,t)}(t,e),function(e,t,n){return t&&Ge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"update",value:function(e){for(var t=this.rendered.values();;){var n=t.next(),r=n.done,o=n.value;if(r)break;o.established+=e;var i=this.measure(o.danmuVo);o.point.x=W.floor((this.width-i.width)/2),o.point.y=W.floor(this.height-(o.lineIndex+1)*this.LINE_HEIGHT+.5*(this.LINE_HEIGHT-i.height)),o.needRemove=o.established>=this.duration}}},{key:"flush",value:function(){this.update(0)}},{key:"add",value:function(e){if(this.rendered.has(e))return!1;var t=this.getFreeline(),n=this.measure(e),r=Date.now()-(e.renderInit||Date.now()),o={point:{x:W.floor((this.width-n.width)/2),y:W.floor(this.height-(t+1)*this.LINE_HEIGHT+.5*(this.LINE_HEIGHT-n.height))},size:n,established:r,speed:6,danmuVo:e,lineIndex:t,needRemove:r>=this.duration};return!o.needRemove&&(this.rendered.set(e,o),this.lineMap.set(t,o),!0)}},{key:"getFreeline",value:function(){for(var e=this.lineMap.entries();;){var t=e.next(),n=t.done,r=Be(t.value,2),o=r[0],i=r[1];if(n||o>=this._maxLineInViewPort)break;if("EMPTY"===i)return o}return W.randomInt(this._maxLineInViewPort)}},{key:"getIndexByYpos",value:function(e){return(n=this,"function"==typeof(r=$e(Je(t.prototype),"getIndexByYpos",n))?function(e){return r.apply(n,e)}:r)([this.height-e]);var n,r}}])}(Ne);function Qe(e){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return et(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?et(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rt(r.key),r)}}function rt(e){var t=function(e,t){if("object"!=Qe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Qe(t)?t:t+""}function ot(e,t,n){return t=it(t),function(e,t){if(t&&("object"==Qe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return!!e}()?Reflect.construct(t,n||[],it(e).constructor):t.apply(e,n))}function it(e){return(it=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function at(e,t){return(at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ut=function(e){function t(){var e;return tt(this,t),(e=ot(this,t,arguments)).SPEED=100,e.STEP=10,e.GAP=30,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&at(e,t)}(t,e),n=t,(r=[{key:"getFreeline",value:function(e){for(var t=this.lineMap.entries();;){var n=t.next(),r=n.done,o=n.value;if(r)break;var i=Ze(o,2),a=i[0],u=i[1];if(a>=this._maxLineInViewPort)break;if("EMPTY"===u)return a;if(W.floor(this.width-e*(this.SPEED+this.STEP*a)/1e3)-(u.point.x+u.size.width)>this.GAP)return a}return W.randomInt(this._maxLineInViewPort)}},{key:"update",value:function(e){for(var t=this.rendered.values();;){var n=t.next(),r=n.done,o=n.value;if(r)break;o.established+=e,o.point.x=W.floor(this.width-o.established*o.speed/1e3),o.needRemove=o.point.x<-o.size.width}}},{key:"flush",value:function(){this.update(0)}},{key:"add",value:function(e){if(this.rendered.has(e))return!1;var t=Date.now()-(e.renderInit||Date.now()),n=this.getFreeline(t),r=this.SPEED+this.STEP*(n%3),o={x:W.floor(this.width-t*r/1e3),y:n*this.LINE_HEIGHT+.5*(this.LINE_HEIGHT-(void 0===e.background?e.size:1===e.danmuStyle?44:36))},i={width:e.render?e.render.width:0,height:e.size},a={point:o,size:i,established:t,speed:r,danmuVo:e,lineIndex:n,needRemove:o.x<-i.width};return!a.needRemove&&(this.rendered.set(e,a),this.lineMap.set(n,a),!0)}}])&&nt(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(Ne);function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return lt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ht(r.key),r)}}function ht(e){var t=function(e,t){if("object"!=ct(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==ct(t)?t:t+""}function pt(e,t,n){return t=yt(t),function(e,t){if(t&&("object"==ct(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return!!e}()?Reflect.construct(t,n||[],yt(e).constructor):t.apply(e,n))}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vt(e,t){return(vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var mt,bt=function(e){function t(){var e;return ft(this,t),(e=pt(this,t,arguments)).duration=4e3,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vt(e,t)}(t,e),n=t,(r=[{key:"update",value:function(e){for(var t=this.rendered.values();;){var n=t.next(),r=n.done,o=n.value;if(r)break;o.established+=e;var i=this.measure(o.danmuVo);o.point.x=W.floor((this.width-i.width)/2),o.point.y=W.floor(o.lineIndex*this.LINE_HEIGHT+.5*(this.LINE_HEIGHT-i.height)),o.needRemove=o.established>=this.duration}}},{key:"flush",value:function(){this.update(0)}},{key:"add",value:function(e){if(this.rendered.has(e))return!1;var t=this.getFreeline(),n=this.measure(e),r=Date.now()-(e.renderInit||Date.now()),o={point:{x:W.floor((this.width-n.width)/2),y:W.floor(t*this.LINE_HEIGHT+W.floor(this.LINE_HEIGHT-n.height))},size:n,established:r,speed:6,danmuVo:e,lineIndex:t,needRemove:r>=this.duration};return!o.needRemove&&(this.rendered.set(e,o),this.lineMap.set(t,o),!0)}},{key:"getFreeline",value:function(){for(var e=this.lineMap.entries();;){var t=e.next(),n=t.done,r=st(t.value,2),o=r[0],i=r[1];if(n||o>=this._maxLineInViewPort)break;if("EMPTY"===i)return o}return W.randomInt(this._maxLineInViewPort)}}])&&dt(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(Ne),gt=requestAnimationFrame||webkitRequestAnimationFrame||mozRequestAnimationFrame||oRequestAnimationFrame||msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)},wt=cancelAnimationFrame||webkitCancelAnimationFrame||mozCancelAnimationFrame||msCancelAnimationFrame||oCancelAnimationFrame||function(e){clearTimeout(e)},_t={raf:gt.bind(window),caf:wt.bind(window)};function Ot(e){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return u}}(e,t)||Et(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){if(e){if("string"==typeof e)return St(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(e,t):void 0}}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pt(r.key),r)}}function Pt(e){var t=function(e,t){if("object"!=Ot(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Ot(t)?t:t+""}!function(e){e.BOTTOM="bottom",e.TOP="top",e.MOVE="move",e.COLOR="color"}(mt||(mt={}));var Tt=function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.controlers=new Map,this.preTime=-1,this._pausedGap=0,this._paused=!1,this._destroyed=!1,this._size={width:0,height:0},this.update=function(){if(!t._paused&&!t._destroyed){var e=Date.now();t.controlers.forEach((function(n){n.update(e-t.preTime-t._pausedGap)})),t._pausedGap=0,t.preTime=e,t.rafid=_t.raf(t.update)}},this.createControler()},(t=[{key:"addToControler",value:function(e){this.controlers.has(e.mode)&&this.controlers.get(e.mode).add(e)}},{key:"getNode",value:function(e){if(this.controlers.has(e.mode))return this.controlers.get(e.mode).getNode(e)}},{key:"remvoeFromControler",value:function(e){this.controlers.has(e.mode)&&this.controlers.get(e.mode).remove(e)}},{key:"findNodeUnderPoint",value:function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Et(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(this.controlers);try{for(n.s();!(t=n.n()).done;){var r=jt(t.value,2)[1].findNodeUnderPoint(e);if(r)return r}}catch(e){n.e(e)}finally{n.f()}}},{key:"clear",value:function(){this.controlers.forEach((function(e){e.clear()}))}},{key:"size",value:function(e,t){return(e!==this._size.width||t!==this._size.height)&&(this.controlers.forEach((function(n){return n.size={width:e,height:t}})),this._size.width=e,this._size.height=t,this.flush(),!0)}},{key:"pause",value:function(){this._paused||(this._pausedGap=Date.now(),this._paused=!0),_t.caf(this.rafid)}},{key:"resume",value:function(){this._paused&&(this._pausedGap=Date.now()-this._pausedGap,this._paused=!1),_t.caf(this.rafid),this.update()}},{key:"toggle",value:function(){this._paused?this.resume():this.pause()}},{key:"destroy",value:function(){this._destroyed=!0,_t.caf(this.rafid)}},{key:"createControler",value:function(){this.controlers.set(mt.BOTTOM,new Xe),this.controlers.set(mt.MOVE,new ut),this.controlers.set(mt.TOP,new bt),this.update()}},{key:"flush",value:function(){this.controlers.forEach((function(e){e.flush()}))}}])&&kt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),xt=n(1),At=n.n(xt);function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){Ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ct(e,t,n){return(t=Ht(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ht(r.key),r)}}function Ht(e){var t=function(e,t){if("object"!=Rt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=Rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Rt(t)?t:t+""}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nt(e,t){return(Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}n(10);var Ut=At.a.getLogger("RENDER").info.bind(null,"[@index]"),Bt=function(){return"hidden"in document?"hidden":(["webkit","moz","ms","o"].some((function(t){return"".concat(t,"Hidden")in document&&(e="".concat(t,"Hidden"),!0)})),e);var e},Ft=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=function(e,t,n){return t=zt(t),function(e,t){if(t&&("object"==Rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return!!e}()?Reflect.construct(t,n||[],zt(e).constructor):t.apply(e,n))}(this,t))._destroyed=!1,n._actived=!0,n._queue=[],n.attach=function(e){var t=e.video,r=e.container;Object.assign(n.config,{video:t,container:r}),n._runner.detach(),n._runner.attach(t),n._render.detach(),n._render.attach(r)},n.delayAppend=function(){n._delayAppendTask||(n._delayAppendTask=setTimeout((function(){n._delayAppendTask=null,n._mode.add(n._queue.splice(0,2)),n._queue.length&&n.delayAppend()}),200))},n.destroy=function(){n._runner.destroy(),n._render.destroy(),n._mode.clear(),n._destroyed=!0,n.clearDelayTask(),n.stop(),n.removeAllListeners()},n.onRunnerAttach=function(e){n.emit(I.ATTACH,e)},n.onRunnerDetach=function(){n.emit(I.DETACH)},n.timeupdate=function(e){n._actived&&n._mode.updateTime(e)},n.onRenerAttach=function(e){n.emit(Se.ATTACH,e)},n.onRenerDetach=function(){n.emit(Se.DETACH)},n.activeHandler=function(){if((t=Bt())&&document[t])n.pause(),n._actived=!1,n.inactiveTime=Date.now();else if(!n._actived){n.resume(),n._actived=!0;var e=Date.now()-n.inactiveTime;Ut("\u524d\u53f0\u6fc0\u6d3b",e),e>5e3&&(Ut("\u95f4\u9694\u8d85\u8fc7\u9650\u5236\uff0c \u6e05\u5c4f"),n._space.clear(),n._mode.removeAllRendered(),n._render.clearRendered(),n.clearDelayTask())}var t},n.update=function(){n.drawToCanvas(),n._rafid=_t.raf(n.update)},n.config=Mt(Mt({},{islive:!0,renderType:"canvas"}),e),!(n.config.container&&n.config.container instanceof HTMLDivElement))throw new Error("\u9700\u8981\u6307\u5b9acontainer\u6e32\u67d3\u5bb9\u5668");if(!(n.config.islive||n.config.video&&n.config.video instanceof HTMLVideoElement))throw new Error("\u70b9\u64ad\u6a21\u5f0f\u9700\u8981\u6307\u5b9avideo\u53c2\u6570\uff0c\u7528\u4e8e\u9a71\u52a8\u5f39\u5e55\u6570\u636e");return n._version="".concat("1.0.2","_").concat(n.config.renderType),n._mode=new f(n.config.islive),n._space=new Tt,n.createRunner(n.config.islive?"live":"vod",n.config.video),n.createRender(n.config.renderType,n.config.container),n.start(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nt(e,t)}(t,e),n=t,(r=[{key:"density",get:function(){return this._mode.current.size}},{key:"blockedType",set:function(e){this._mode.blockedType=e}},{key:"version",get:function(){return this._version}},{key:"add",value:function(e){var t;Array.isArray(e)?(t=this._queue).push.apply(t,function(e){return function(e){if(Array.isArray(e))return Lt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Lt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e)):this._queue.push(e),this.delayAppend()}},{key:"pause",value:function(){this._destroyed||(this._runner.pause(),this._space.pause(),this._mode.locked=this.config.islive)}},{key:"resume",value:function(){this._destroyed||(this._runner.resume(),this._space.resume(),this._mode.locked=!1)}},{key:"toggle",value:function(){this._destroyed||(this._runner.toggle(),this._space.toggle(),this._mode.locked=this.config.islive&&!this._runner.playing)}},{key:"clearAll",value:function(){this._space.clear(),this._render.clearRendered(),this._mode.clear(),this.clearDelayTask()}},{key:"clearDelayTask",value:function(){this._queue.length=0,clearTimeout(this._delayAppendTask),this._delayAppendTask=null}},{key:"createRunner",value:function(e,t){this._runner=new N(e),this._runner.on(I.TIME_UPDATE,this.timeupdate),this._runner.on(I.ATTACH,this.onRunnerAttach),this._runner.on(I.DETACH,this.onRunnerDetach),this._runner.attach(t)}},{key:"createRender",value:function(e,t){this._render=new Re(e),this._render.on(Se.ATTACH,this.onRenerAttach),this._render.on(Se.DETACH,this.onRenerDetach),this._render.attach(t)}},{key:"start",value:function(){_t.caf(this._rafid),this.addActiveHandler(),this.update()}},{key:"stop",value:function(){_t.caf(this._rafid),this.addActiveHandler(!0)}},{key:"addActiveHandler",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Bt();if(t){var n=t.replace(/[H|h]idden/,"")+"visibilitychange";e?document.removeEventListener(n,this.activeHandler):document.addEventListener(n,this.activeHandler)}}},{key:"drawToCanvas",value:function(){var e=this,t=new Map,n=[];this._render.reset(),this.alignSpace(),this._mode.current.forEach((function(r){r.render||me.create(r),e._space.addToControler(r);var o=e._space.getNode(r);o?o.needRemove?(e._space.remvoeFromControler(r),me.recyle(r),n.push(r)):t.set(r,o):n.push(r)})),this._render.drawDanmus(t),n.length>0&&this._mode.removeFromRendered(n)}},{key:"alignSpace",value:function(){var e=W.floor(this.config.container.clientWidth),t=W.floor(this.config.container.clientHeight);this._space.size(e,t)}}])&&Dt(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(r.EventEmitter);Ft.version="1.0.2"}]).default},348:function(e,t,n){const r=n(231);e.exports=r.default||r}}]);