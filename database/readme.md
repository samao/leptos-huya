| 宏                | 作用                                                          | 最少代码示例                                                                                                                                  | 常见注意点                                              |
| ---------------- | ----------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------- |
| **Queryable**    | 把 **SELECT 出来的行** 反序列化成 Rust 结构体。只用于查询，**不**参与写入。           | `rust #[derive(Queryable)] pub struct User { pub id: i32, pub name: String, } `                                                         | 字段顺序必须和 schema 里的列顺序一致。                            |
| **Identifiable** | 告诉 Diesel “我是谁”——结构体里哪个字段是主键，方便后续 `update` / `delete` 时定位行。 | `rust #[derive(Identifiable)] #[diesel(table_name = users)] pub struct User { pub id: i32, … } `                                        | 默认找字段 `id`，主键改名时加 `#[primary_key(xxx)]`。           |
| **Selectable**   | 让结构体可以作为 **select 子句** 直接使用（搭配 `as_select()` 生成类型安全投影）。     | `rust #[derive(Queryable, Selectable)] #[diesel(table_name = users)] pub struct User { … } `                                            | 常与 `Queryable` 一起用，避免手写 `select( (id, name, …) )`。 |
| **Associations** | 声明 **“我属于谁”**——在父子表之间建立一对多/一对一关系，用于 `.belonging_to()` 等查询。  | `rust #[derive(Associations)] #[diesel(belongs_to(User, foreign_key = user_id))] pub struct Post { pub id: i32, pub user_id: i32, … } ` | 必须同时给“父”结构体加 `Identifiable`，才能链式查询。                |
| **Insertable**   | 把结构体当成 \*\*VALUES (…) \*\* 插入表；字段可缺省主键或默认值。                 | `rust #[derive(Insertable)] #[diesel(table_name = users)] pub struct NewUser<'a> { pub name: &'a str, } `                               | 结构体一般不含自增 id；可用 `#[column_name = xxx]` 做重映射。       |
